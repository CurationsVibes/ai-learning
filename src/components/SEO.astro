---
// Enhanced SEO Component for CURATOR HUB
// Adds rich meta tags, Open Graph, Twitter Cards, and schema.org markup
interface Props {
  title: string;
  description?: string;
  type?: 'website' | 'article';
  image?: string;
  author?: string;
  publishedTime?: string;
  modifiedTime?: string;
  keywords?: string[];
  section?: string;
}

const {
  title,
  description = 'A comprehensive knowledge wiki by CURATIONS — a Human × AI Creative Agency in Los Angeles',
  type = 'website',
  image = 'https://hub.curations.org/og-image.png',
  author = 'CURATIONS',
  publishedTime,
  modifiedTime,
  keywords = ['AI learning', 'AI frameworks', 'Human AI collaboration', 'AI development', 'creative AI'],
  section
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const fullTitle = title === 'CURATOR HUB' ? title : `${title} | CURATOR HUB by CURATIONS`;

// Generate Article schema for content pages
const articleSchema = type === 'article' ? {
  '@context': 'https://schema.org',
  '@type': 'Article',
  headline: title,
  description: description,
  image: image,
  author: {
    '@type': 'Organization',
    name: 'CURATIONS',
    url: 'https://curations.org'
  },
  publisher: {
    '@type': 'Organization',
    name: 'CURATIONS',
    url: 'https://curations.org',
    description: 'A Human × AI Creative Agency in Los Angeles'
  },
  mainEntityOfPage: {
    '@type': 'WebPage',
    '@id': canonicalURL.href
  },
  ...(publishedTime && { datePublished: publishedTime }),
  ...(modifiedTime && { dateModified: modifiedTime }),
  inLanguage: 'en-US',
  isAccessibleForFree: true,
  ...(section && { articleSection: section })
} : null;
---

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta name="title" content={fullTitle} />
<meta name="description" content={description} />
<meta name="keywords" content={keywords.join(', ')} />
<meta name="author" content={author} />
<meta name="robots" content="index, follow" />
<meta name="language" content="English" />
<meta name="revisit-after" content="7 days" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL.href} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={image} />
<meta property="og:site_name" content="CURATOR HUB by CURATIONS" />
<meta property="og:locale" content="en_US" />
{type === 'article' && publishedTime && (
  <meta property="article:published_time" content={publishedTime} />
)}
{type === 'article' && modifiedTime && (
  <meta property="article:modified_time" content={modifiedTime} />
)}
{type === 'article' && author && (
  <meta property="article:author" content={author} />
)}
{type === 'article' && section && (
  <meta property="article:section" content={section} />
)}

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonicalURL.href} />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={image} />
<meta name="twitter:creator" content="@CURATIONS" />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalURL.href} />

<!-- Additional Meta Tags -->
<meta name="theme-color" content="#667eea" />
<meta name="msapplication-TileColor" content="#667eea" />

<!-- Schema.org JSON-LD for Articles -->
{articleSchema && (
  <script type="application/ld+json" set:html={JSON.stringify(articleSchema)} />
)}

<!-- Knowledge Graph Data -->
<script type="application/ld+json" set:html={JSON.stringify({
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: title,
  description: description,
  url: canonicalURL.href,
  isPartOf: {
    '@type': 'WebSite',
    name: 'CURATOR HUB',
    url: 'https://hub.curations.org/',
    publisher: {
      '@type': 'Organization',
      name: 'CURATIONS',
      url: 'https://curations.org',
      description: 'A Human × AI Creative Agency in Los Angeles',
      address: {
        '@type': 'PostalAddress',
        addressLocality: 'Los Angeles',
        addressRegion: 'CA',
        addressCountry: 'US'
      }
    }
  },
  inLanguage: 'en-US',
  potentialAction: {
    '@type': 'ReadAction',
    target: [canonicalURL.href]
  }
})} />
